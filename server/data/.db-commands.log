CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    authorizationCode VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    familyName VARCHAR(255),
    givenName VARCHAR(255),
    middleName VARCHAR(255),
    namePrefix VARCHAR(255),
    nameSuffix VARCHAR(255),
    nickname VARCHAR(255),
    identityToken TEXT,
    realUserStatus INT,
    state VARCHAR(255),
    appleUserId VARCHAR(255) UNIQUE NOT NULL,
    icsFeedUrl VARCHAR(255),
    createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    lastLoginAt TIMESTAMP NULL DEFAULT NULL,
    updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE tasks (
    id INT AUTO_INCREMENT PRIMARY KEY,
    appleUserId VARCHAR(255) NOT NULL,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    taskSize ENUM('Pebble', 'Cobble', 'Boulder') NOT NULL,
    status ENUM('Not Started', 'Completed') NOT NULL DEFAULT 'Not Started',
    assignedDate DATE,
    dueDate DATE NOT NULL,
    createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    numPostpone INT DEFAULT 0,
    lastPostponeAt DATE,
    FOREIGN KEY (appleUserId) REFERENCES users(appleUserId)
);